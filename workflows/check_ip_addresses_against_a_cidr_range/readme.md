# check_ip_addresses_against_a_cidr_range

## Overview

This template determines if any IP addresses from a provided list fall within a given IP range. 

The main flow iterates through the list of IP addresses and calls a helper flow for each one. The helper flow then uses Okta Workflows' built-in IP address functions to check if the specific IP is within the specified CIDR range. Finally, the main flow reports whether at least one IP address from the list was found within the range. 

This template is useful for tasks such as validating network zone configurations, checking access logs against allowed IP ranges, or automating parts of network security audits. 

## Prerequisites

1. Access to an Okta tenant with Okta Workflows enabled for your org. 

## Setup Steps

After installing these templates, follow these steps to configure them:

1. In the **IP Address Range Check** parent flow, define the range (upper bound and lower bound) in the **Flow Control - Assign** card.


2. In the **Text Compose** card, put the `x-forwarded-for` header value from the example JSON payload to check to see if any of the IP addresses in the header are in the range specified in the **Assign** card.


3. Activate all the three flows. 


## Testing this Flow

1. In the **IP Address Range Check** parent flow, set the upper and lower bound in the **Assign** cards with appropriate test values. 

2. Provide a JSON to the **Compose Text** card with IP addresses that are both inside and outside the specified range as the value for the **x-forwarded-for** field.

3. Trigger the **IP Address Range Check** parent flow and monitor the execution history and output. Verify it iterates through and calls the helper flow for all provided IP addresses.

4. Observe the final output message generated by the main flow (typically composed in the If/Else branches). It should correctly state whether any IP was found in the range and identify the first match if one occurred.

## Limitations & Known Issues
- Keep in mind the Okta Workflows system limits.
- Error handling isn't addressed in this template.